<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journey Page</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Oswald:wght@500&display=swap" rel="stylesheet">

    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        /* --- Converted from SCSS --- */
        :root {
            --primary-color: #ecad29;
            --text-color: #FFFFFFDD;
        }

        body {
            margin: 0;
            background-color: #1a1a1a;
            color: var(--text-color);
            position: relative;
            overflow: hidden;
            font-family: "Inter", sans-serif;
        }

        .card {
            position: absolute;
            left: 0;
            top: 0;
            background-position: center;
            background-size: cover;
            box-shadow: 6px 6px 10px 2px rgba(0, 0, 0, 0.6);
        }

        .card-content {
            position: absolute;
            left: 0;
            top: 0;
            color: var(--text-color);
            padding-left: 16px;
        }

        .content-place {
            margin-top: 6px;
            font-size: 13px;
            font-weight: 500;
        }

        .content-title-1,
        .content-title-2 {
            font-weight: 600;
            font-size: 20px;
            font-family: "Oswald", sans-serif;
        }

        .content-start {
            width: 30px;
            height: 5px;
            border-radius: 99px;
            background-color: var(--text-color);
        }

        .details {
            z-index: 22;
            position: absolute;
            top: 240px;
            left: 60px;
        }

        .details .place-box {
            height: 46px;
            overflow: hidden;
        }

        .details .place-box .text {
            padding-top: 16px;
            font-size: 20px;
            position: relative;
        }

        .details .place-box .text:before {
            top: 0;
            left: 0;
            position: absolute;
            content: "";
            width: 30px;
            height: 4px;
            border-radius: 99px;
            background-color: white;
        }

        .details .title-1,
        .details .title-2 {
            font-weight: 600;
            font-size: 72px;
            font-family: "Oswald", sans-serif;
        }

        .details .title-box-1,
        .details .title-box-2 {
            margin-top: 2px;
            height: 100px;
            overflow: hidden;
        }

        .details > .desc {
            margin-top: 16px;
            width: 500px;
        }

        .details > .cta {
            width: 500px;
            margin-top: 24px;
            display: flex;
            align-items: center;
        }

        .details > .cta > .bookmark {
            border: none;
            background-color: var(--primary-color);
            width: 36px;
            height: 36px;
            border-radius: 99px;
            color: white;
            display: grid;
            place-items: center;
        }

        .details > .cta > .bookmark svg {
            width: 20px;
            height: 20px;
        }

        .details > .cta > .discover {
    /* --- Base Styles --- */
    border: 1px solid #ffffff;
    background-color: transparent; /* Start with a transparent background */
    height: 50px; /* Keeping the bigger size */
    border-radius: 99px;
    color: #ffffff; /* Text is white on the transparent button */
    padding: 4px 40px;
    font-size: 16px;
    font-weight: 700;
    margin-left: 24px;
    text-transform: uppercase;
    cursor: pointer;

    /* --- Animation Setup --- */
    position: relative; /* Needed for the ::before pseudo-element */
    z-index: 1;
    overflow: hidden; /* Hides the background color outside the button */
    transition: color 0.3s ease; /* Animate the text color change */
}

/* --- This is the magic part for the sliding background --- */
.details > .cta > .discover::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--primary-color); /* The color that will slide in */
    border-radius: 99px;
    z-index: -1; /* Places the background behind the text */

    /* This is the key to the animation! */
    transform: translateX(-100%); /* Start completely off-screen to the left */
    transition: transform 0.4s cubic-bezier(0.75, 0, 0.125, 1); /* Smooth, slightly bouncy slide-in */
}
/* --- Add this new CSS rule --- */
.details > .cta > .discover:hover {
    color: #1a1a1a; /* Change text to dark for contrast */
    transform: scale(1.03); /* A very slight scale effect */
}

/* On hover, slide the background in from the left */
.details > .cta > .discover:hover::before {
    transform: translateX(0); /* Move the background to its original position */
}
        nav {
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 36px;
            font-weight: 500;
        }

        nav svg {
            width: 20px;
            height: 20px;
        }

        nav .svg-container {
            width: 20px;
            height: 20px;
        }

        nav > div {
            display: inline-flex;
            align-items: center;
            text-transform: uppercase;
            font-size: 14px;
        }

        nav > div:first-child {
            gap: 10px;
        }

        nav > div:last-child {
            gap: 24px;
        }

        nav > div:last-child > .active {
            position: relative;
        }

        nav > div:last-child > .active:after {
            bottom: -8px;
            left: 0;
            right: 0;
            position: absolute;
            content: "";
            height: 3px;
            border-radius: 99px;
            background-color: var(--primary-color);
        }

        .indicator {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            height: 5px;
            z-index: 60;
            background-color: var(--primary-color);
        }

        .pagination {
            position: absolute;
            left: 0px;
            top: 0px;
            display: inline-flex;
        }

        .pagination > .arrow {
            z-index: 60;
            width: 50px;
            height: 50px;
            border-radius: 999px;
            border: 2px solid #ffffff55;
            display: grid;
            place-items: center;
        }

        .pagination > .arrow:nth-child(2) {
            margin-left: 20px;
        }

        .pagination > .arrow svg {
            width: 24px;
            height: 24px;
            stroke-width: 2;
            color: #ffffff99;
        }

        .pagination .progress-sub-container {
            margin-left: 24px;
            z-index: 60;
            width: 500px;
            height: 50px;
            display: flex;
            align-items: center;
        }

        .pagination .progress-sub-background {
            width: 500px;
            height: 3px;
            background-color: #ffffff33;
        }

        .pagination .progress-sub-foreground {
            height: 3px;
            background-color: var(--primary-color);
        }

        .pagination .slide-numbers {
            width: 50px;
            height: 50px;
            overflow: hidden;
            z-index: 60;
            position: relative;
        }

        .pagination .slide-numbers .item {
            width: 50px;
            height: 50px;
            position: absolute;
            color: white;
            top: 0;
            left: 0;
            display: grid;
            place-items: center;
            font-size: 32px;
            font-weight: bold;
        }

        .cover {
            position: absolute;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background-color: #fff;
            z-index: 100;
        }
    </style>
</head>
<body>

    <div class="indicator"></div>

    <nav>
      <div>
        <div class="svg-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"
            />
          </svg>
        </div>
        <div>MISFR Africa</div>
      </div>
      <div>
        <div class="active">Monitoring</div>
        <div>Analysis</div>
        <div>Layers</div>
        <div>Data</div>
        <div>Reports</div>
        <div>API</div>
        <div class="svg-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
            />
          </svg>
        </div>
        <div class="svg-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
      </div>
    </nav>

    <div id="demo"></div>

    <div class="details" id="details-even">
      <div class="place-box">
        <div class="text">Sahara Desert - Algeria</div>
      </div>
      <div class="title-box-1"><div class="title-1">SAND</div></div>
      <div class="title-box-2"><div class="title-2">DUNES MONITORING</div></div>
      <div class="desc">
        Vast desert landscapes tracked for environmental changes, sand movement patterns, and climate impact studies using advanced satellite imagery analysis.
      </div>
      <div class="cta">
        <button class="bookmark">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <button class="discover">Explore Region</button>
      </div>
    </div>

    <div class="details" id="details-odd">
      <div class="place-box">
        <div class="text">Sahara Desert - Algeria</div>
      </div>
      <div class="title-box-1"><div class="title-1">SAND</div></div>
      <div class="title-box-2"><div class="title-2">DUNES MONITORING</div></div>
      <div class="desc">
        Vast desert landscapes tracked for environmental changes, sand movement patterns, and climate impact studies using advanced satellite imagery analysis.
      </div>
      <div class="cta">
        <button class="bookmark">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <button class="discover">Explore Region</button>
      </div>
    </div>

    <div class="pagination" id="pagination">
    <div class="progress-sub-container" >
        <div class="progress-sub-background" >
            <div class="progress-sub-foreground" ></div>
        </div>
    </div>
    <div class="slide-numbers" id="slide-numbers"></div>
</div>

    <div class="cover" ></div>

    <script>
        const data = [
            {
                place:'Sahara Desert - Algeria',
                title:'SAND',
                title2:'DUNES MONITORING',
                description:'Vast desert landscapes tracked for environmental changes, sand movement patterns, and climate impact studies using advanced satellite imagery analysis.',
                image:'sahara.jpg'
            },
            {
                place:'Congo Rainforest - DRC',
                title:'CANOPY',
                title2:'FOREST HEALTH',
                description:'Ancient rainforest monitored for deforestation detection, biodiversity assessment, and carbon storage analysis through multispectral data.',
                image:'rainforest.jpg'
            },
            {
                place:'Nile Delta - Egypt',
                title:'DELTA',
                title2:'WATER SYSTEMS',
                description:'Critical water resources analyzed for irrigation patterns, flood risk assessment, and agricultural sustainability monitoring.',
                image:'nile.jpg'
            },
            {
                place:'Great Rift Valley - Kenya',
                title:'RIFT',
                title2:'GEOLOGICAL ACTIVITY',
                description:'Tectonic activity and geological formations studied for resource mapping and environmental risk assessment.',
                image:'https://www.safarisrwandasafari.com/wp-content/uploads/2022/10/ethiopia-rift-valley-aerial-view-sb10068596hq-001-5878cd753df78c17b65b7898-scaled.jpg'
            },
            {
                place:'Cape Floristic - South Africa',
                title:'FLORA',
                title2:'BIODIVERSITY',
                description:'Unique ecosystem monitored for species conservation, habitat protection, and climate change impact studies.',
                image:'https://www.capetown.travel/wp-content/uploads/Cape-towns-biodiversity-.jpg'
            },
            {
                place:'Atlas Mountains - Morocco',
                title:'ATLAS',
                title2:'MOUNTAIN DYNAMICS',
                description:'High-altitude terrain monitored for snowpack variation, tectonic uplift patterns, and watershed changes using detailed elevation and climate datasets.',
                image:'atlas.jpg'
            },
        ]

        const _ = (id)=>document.getElementById(id)
        const cards = data.map((i, index)=>`<div class="card" id="card${index}" style="background-image:url(${i.image})"  ></div>`).join('')



        const cardContents = data.map((i, index)=>`<div class="card-content" id="card-content-${index}">
        <div class="content-start"></div>
        <div class="content-place">${i.place}</div>
        <div class="content-title-1">${i.title}</div>
        <div class="content-title-2">${i.title2}</div>

        </div>`).join('')


        const sildeNumbers = data.map((_, index)=>`<div class="item" id="slide-item-${index}" >${index+1}</div>`).join('')
        _('demo').innerHTML =  cards + cardContents
        _('slide-numbers').innerHTML =  sildeNumbers


        const range = (n) =>
          Array(n)
            .fill(0)
            .map((i, j) => i + j);
        const set = gsap.set;

        function getCard(index) {
          return `#card${index}`;
        }
        function getCardContent(index) {
          return `#card-content-${index}`;
        }
        function getSliderItem(index) {
          return `#slide-item-${index}`;
        }

        function animate(target, duration, properties) {
          return new Promise((resolve) => {
            gsap.to(target, {
              ...properties,
              duration: duration,
              onComplete: resolve,
            });
          });
        }

        let order = [0, 1, 2, 3, 4, 5];
        let detailsEven = true;

        let offsetTop = 200;
        let offsetLeft = 700;
        let cardWidth = 200;
        let cardHeight = 300;
        let gap = 40;
        let numberSize = 50;
        const ease = "sine.inOut";

        function init() {
          const [active, ...rest] = order;
          const detailsActive = detailsEven ? "#details-even" : "#details-odd";
          const detailsInactive = detailsEven ? "#details-odd" : "#details-even";
          const { innerHeight: height, innerWidth: width } = window;
          offsetTop = height - 430;
          offsetLeft = width - 830;

          gsap.set("#pagination", {
            top: offsetTop + 330,
            left: offsetLeft,
            y: 200,
            opacity: 0,
            zIndex: 60,
          });
          gsap.set("nav", { y: -200, opacity: 0 });

          gsap.set(getCard(active), {
            x: 0,
            y: 0,
            width: window.innerWidth,
            height: window.innerHeight,
          });
          gsap.set(getCardContent(active), { x: 0, y: 0, opacity: 0 });
          gsap.set(detailsActive, { opacity: 0, zIndex: 22, x: -200 });
          gsap.set(detailsInactive, { opacity: 0, zIndex: 12 });
          gsap.set(`${detailsInactive} .text`, { y: 100 });
          gsap.set(`${detailsInactive} .title-1`, { y: 100 });
          gsap.set(`${detailsInactive} .title-2`, { y: 100 });
          gsap.set(`${detailsInactive} .desc`, { y: 50 });
          gsap.set(`${detailsInactive} .cta`, { y: 60 });

          gsap.set(".progress-sub-foreground", {
            width: 500 * (1 / order.length) * (active + 1),
          });

          rest.forEach((i, index) => {
            gsap.set(getCard(i), {
              x: offsetLeft + 400 + index * (cardWidth + gap),
              y: offsetTop,
              width: cardWidth,
              height: cardHeight,
              zIndex: 30,
              borderRadius: 10,
            });
            gsap.set(getCardContent(i), {
              x: offsetLeft + 400 + index * (cardWidth + gap),
              zIndex: 40,
              y: offsetTop + cardHeight - 100,
            });
            gsap.set(getSliderItem(i), { x: (index + 1) * numberSize });
          });

          gsap.set(".indicator", { x: -window.innerWidth });

          const startDelay = 0.6;

          gsap.to(".cover", {
            x: width + 400,
            delay: 0.5,
            ease,
            onComplete: () => {
              setTimeout(() => {
                loop();
              }, 500);
            },
          });
          rest.forEach((i, index) => {
            gsap.to(getCard(i), {
              x: offsetLeft + index * (cardWidth + gap),
              zIndex: 30,
              delay: 0.05 * index,
              ease,
              delay: startDelay,
            });
            gsap.to(getCardContent(i), {
              x: offsetLeft + index * (cardWidth + gap),
              zIndex: 40,
              delay: 0.05 * index,
              ease,
              delay: startDelay,
            });
          });
          gsap.to("#pagination", { y: 0, opacity: 1, ease, delay: startDelay });
          gsap.to("nav", { y: 0, opacity: 1, ease, delay: startDelay });
          gsap.to(detailsActive, { opacity: 1, x: 0, ease, delay: startDelay });
        }

        let clicks = 0;

        function step() {
          return new Promise((resolve) => {
            order.push(order.shift());
            detailsEven = !detailsEven;

            const detailsActive = detailsEven ? "#details-even" : "#details-odd";
            const detailsInactive = detailsEven ? "#details-odd" : "#details-even";

            document.querySelector(`${detailsActive} .place-box .text`).textContent =
              data[order[0]].place;
            document.querySelector(`${detailsActive} .title-1`).textContent =
              data[order[0]].title;
            document.querySelector(`${detailsActive} .title-2`).textContent =
              data[order[0]].title2;
            document.querySelector(`${detailsActive} .desc`).textContent =
              data[order[0]].description;

            gsap.set(detailsActive, { zIndex: 22 });
            gsap.to(detailsActive, { opacity: 1, delay: 0.4, ease });
            gsap.to(`${detailsActive} .text`, {
              y: 0,
              delay: 0.1,
              duration: 0.7,
              ease,
            });
            gsap.to(`${detailsActive} .title-1`, {
              y: 0,
              delay: 0.15,
              duration: 0.7,
              ease,
            });
            gsap.to(`${detailsActive} .title-2`, {
              y: 0,
              delay: 0.15,
              duration: 0.7,
              ease,
            });
            gsap.to(`${detailsActive} .desc`, {
              y: 0,
              delay: 0.3,
              duration: 0.4,
              ease,
            });
            gsap.to(`${detailsActive} .cta`, {
              y: 0,
              delay: 0.35,
              duration: 0.4,
              onComplete: resolve,
              ease,
            });
            gsap.set(detailsInactive, { zIndex: 12 });

            const [active, ...rest] = order;
            const prv = rest[rest.length - 1];

            gsap.set(getCard(prv), { zIndex: 10 });
            gsap.set(getCard(active), { zIndex: 20 });
            gsap.to(getCard(prv), { scale: 1.5, ease });

            gsap.to(getCardContent(active), {
              y: offsetTop + cardHeight - 10,
              opacity: 0,
              duration: 0.3,
              ease,
            });
            gsap.to(getSliderItem(active), { x: 0, ease });
            gsap.to(getSliderItem(prv), { x: -numberSize, ease });
            gsap.to(".progress-sub-foreground", {
              width: 500 * (1 / order.length) * (active + 1),
              ease,
            });

            gsap.to(getCard(active), {
              x: 0,
              y: 0,
              ease,
              width: window.innerWidth,
              height: window.innerHeight,
              borderRadius: 0,
              onComplete: () => {
                const xNew = offsetLeft + (rest.length - 1) * (cardWidth + gap);
                gsap.set(getCard(prv), {
                  x: xNew,
                  y: offsetTop,
                  width: cardWidth,
                  height: cardHeight,
                  zIndex: 30,
                  borderRadius: 10,
                  scale: 1,
                });

                gsap.set(getCardContent(prv), {
                  x: xNew,
                  y: offsetTop + cardHeight - 100,
                  opacity: 1,
                  zIndex: 40,
                });
                gsap.set(getSliderItem(prv), { x: rest.length * numberSize });

                gsap.set(detailsInactive, { opacity: 0 });
                gsap.set(`${detailsInactive} .text`, { y: 100 });
                gsap.set(`${detailsInactive} .title-1`, { y: 100 });
                gsap.set(`${detailsInactive} .title-2`, { y: 100 });
                gsap.set(`${detailsInactive} .desc`, { y: 50 });
                gsap.set(`${detailsInactive} .cta`, { y: 60 });
                clicks -= 1;
                if (clicks > 0) {
                  step();
                }
              },
            });

            rest.forEach((i, index) => {
              if (i !== prv) {
                const xNew = offsetLeft + index * (cardWidth + gap);
                gsap.set(getCard(i), { zIndex: 30 });
                gsap.to(getCard(i), {
                  x: xNew,
                  y: offsetTop,
                  width: cardWidth,
                  height: cardHeight,
                  ease,
                  delay: 0.1 * (index + 1),
                });

                gsap.to(getCardContent(i), {
                  x: xNew,
                  y: offsetTop + cardHeight - 100,
                  opacity: 1,
                  zIndex: 40,
                  ease,
                  delay: 0.1 * (index + 1),
                });
                gsap.to(getSliderItem(i), { x: (index + 1) * numberSize, ease });
              }
            });
          });
        }

        async function loop() {
          await animate(".indicator", 2, { x: 0 });
          await animate(".indicator", 0.8, { x: window.innerWidth, delay: 0.3 });
          set(".indicator", { x: -window.innerWidth });
          await step();
          loop();
        }

        async function loadImage(src) {
          return new Promise((resolve, reject) => {
            let img = new Image();
            img.onload = () => resolve(img);
            img.onerror = reject;
            img.src = src;
          });
        }

        async function loadImages() {
          const promises = data.map(({ image }) => loadImage(image));
          return Promise.all(promises);
        }

        async function start() {
          try {
            await loadImages();
            init();
          } catch (error) {
            console.error("One or more images failed to load", error);
          }
        }

        // Add click event listeners for "Analyze Region" buttons
        function addClickListeners() {
            const regionUrls = {
                'Sahara Desert - Algeria': '/journey/sahara-algeria',
                'Congo Rainforest - DRC': '/journey/congo-drc',
                'Nile Delta - Egypt': '/journey/nile-egypt',
                'Great Rift Valley - Kenya': '/journey/rift-kenya',
                'Cape Floristic Region - South Africa': '/journey/cape-south-africa',
                'Atlas Mountains - Morocco': '/journey/atlas-morocco'
            };

            // Add click listeners to all discover buttons
            document.querySelectorAll('.discover').forEach(button => {
                button.addEventListener('click', function() {
                    // Get current active region from the data array based on current slide
                    const activeIndex = order[0]; // The first item in order array is the current active
                    const currentRegion = data[activeIndex];
                    const targetUrl = regionUrls[currentRegion.place];
                    if (targetUrl) {
                        // Navigate the top window, not just the iframe
                        window.top.location.href = targetUrl;
                    }
                });
            });
        }

        start()
        // Add click listeners after a short delay to ensure everything is initialized
        setTimeout(() => {
            addClickListeners()
        }, 1000)
    </script>
</body>
</html>